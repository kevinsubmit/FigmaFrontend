# 开发更新：H5 预约详情与图片详情优化（2026-02-10）

## 一、变更背景
本次主要处理两个 H5 体验问题：
- 图片详情页的分类标签交互存在歧义，已按产品决策下线该区域。
- 预约详情弹窗中日期在小屏幕会换行，影响可读性。

## 二、前端变更

### 1) 图片详情页下线分类标签展示
- 文件：`frontend/src/components/PinDetail.tsx`
- 变更：
  - 删除详情页中标签列表展示区域。
  - 移除 `onTagClick` 相关 props 定义和调用。

- 文件：`frontend/src/App.tsx`
- 变更：
  - 删除 `PinDetail` 路由中 `onTagClick` 传参逻辑。

### 2) 首页标签跳转兼容修复（防残留搜索条件）
- 文件：`frontend/src/components/Home.tsx`
- 变更：
  - 处理 `/?tag=xxx` 时仅应用标签过滤。
  - 清空 `searchDraft` / `searchQuery`，避免“标签过滤 + 关键词搜索”叠加导致结果异常。

### 3) 预约详情弹窗日期单行显示
- 文件：`frontend/src/components/AppointmentDetailsDialog.tsx`
- 变更：
  - Date 值文本增加 `whitespace-nowrap`，保证 `Wed, Feb 11` 在一行内显示。

## 三、后端一致性优化（姓名展示统一）
为减少多字段显示混乱，统一姓名展示优先级：
- `full_name` -> `username`

涉及文件：
- `backend/app/api/v1/endpoints/reviews.py`
- `backend/app/api/v1/endpoints/stores.py`
- `backend/app/api/v1/endpoints/technicians.py`

## 四、验证结果
- 前端构建验证：`cd frontend && npm run build` 通过。
- 后端编译验证：`cd backend && ./venv/bin/python -m compileall app` 通过。

## 五、说明
- 本次未提交本地环境文件（如 `.env`、`__pycache__`、本地数据库文件），避免污染远程仓库。
