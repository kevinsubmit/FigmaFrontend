# 开发更新：技师业绩查询（今日/历史）

## 1. 功能目标
在后台 Staff 模块支持按技师查看：
- 今日订单数、今日金额
- 历史订单数、历史金额
- 某技师订单明细（可按今天/历史全部/自定义日期范围筛选）

## 2. 后端接口
文件：`backend/app/api/v1/endpoints/technicians.py`

### 2.1 业绩汇总
- `GET /api/v1/technicians/performance/summary?store_id=...`
- 返回每个技师的：
  - `today_order_count`
  - `today_amount`
  - `total_order_count`
  - `total_amount`

说明：
- 超管需传 `store_id`
- 店铺管理员自动限定本店
- 统计基于 `appointment_staff_splits`
- 仅统计 `completed` 订单
- 今日按美东时区（ET）计算

### 2.2 技师明细
- `GET /api/v1/technicians/{technician_id}/performance`
- 支持参数：
  - `date_from`（YYYY-MM-DD）
  - `date_to`（YYYY-MM-DD）
  - `skip`、`limit`
- 返回：
  - 本次筛选订单数/金额
  - 历史总订单数/金额
  - 明细列表（订单号、时间、服务、项目、顾客、拆分金额）

## 3. 管理后台页面
文件：`admin-dashboard/src/pages/Staff.tsx`

### 3.1 列表新增列
- Today Orders
- Today Amount
- History Orders
- History Amount

### 3.2 业绩明细抽屉
- 点击“业绩明细”打开
- 支持快捷筛选：今天 / 历史全部
- 支持自定义日期范围筛选
- 展示汇总卡片和明细表

## 4. 前端 API 封装
文件：`admin-dashboard/src/api/technicians.ts`
- `getTechnicianPerformanceSummary`
- `getTechnicianPerformanceDetail`

## 5. 构建验证
- 后端编译通过：`cd backend && ./venv/bin/python -m compileall app`
- 管理后台构建通过：`cd admin-dashboard && npm run build`
