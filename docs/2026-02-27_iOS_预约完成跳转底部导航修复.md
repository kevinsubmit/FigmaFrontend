# 2026-02-27 iOS 预约完成后跳转 Appointments 底部导航丢失修复

## 问题现象
- 路径：`Book Services -> Continue -> Confirm Appointment -> 自动跳转 Appointments`
- 结果：进入 `My Appointments` 后底部导航栏未显示，无法快速切换到 Home/Book/Deals/Profile。

## 根因分析
- `StoreDetailView` 中存在对系统 `UITabBar` 的全局隐藏逻辑（直接操作 `tabBar.isHidden`）。
- 当页面栈/弹层切换时，这个全局状态可能残留，导致后续切到其他 Tab（如 Appointments）时，底部导航仍被隐藏。

## 修复方案
- 移除 `StoreDetailView` 内所有“全局控制系统 TabBar 显隐”的代码：
  - 删除 `captureAndHideSystemTabBar()` / `restoreSystemTabBarVisibility()` 及相关辅助方法。
  - 删除 `previousSystemTabBarHidden` 状态字段。
  - 删除 `.onAppear` / `.onDisappear` 中的全局 tabBar 显隐调用。
- 保留 SwiftUI 页面级 `.toolbar(.hidden, for: .tabBar)` 控制，避免跨页面污染全局导航状态。

## 代码变更
- `ios-app/NailsDashIOS/Sources/Features/Stores/StoreDetailView.swift`

## 验证
- 编译验证：
```bash
xcodebuild -project ios-app/NailsDashIOS.xcodeproj \
  -scheme NailsDashIOS \
  -configuration Debug \
  -destination 'generic/platform=iOS Simulator' \
  CODE_SIGNING_ALLOWED=NO build
```
- 结果：`BUILD SUCCEEDED`

## 回归建议
1. 从图片详情/店铺详情进入预约流程，完成预约后自动跳转 Appointments，确认底部导航显示正常。
2. 从 Appointments 切换到 Home/Book/Deals/Profile，确认导航栏无丢失。
3. 多次重复“进入店铺详情 -> 关闭 -> 再预约成功跳转”流程，确认无状态残留。
