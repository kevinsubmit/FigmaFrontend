nohup: ignoring input
INFO:     Will watch for changes in these directories: ['/home/ubuntu/FigmaFrontend/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [6059] using WatchFiles
Process SpawnProcess-1:
Traceback (most recent call last):
  File "/usr/lib/python3.11/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
  File "/usr/lib/python3.11/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/server.py", line 65, in run
    return asyncio.run(self.serve(sockets=sockets))
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/asyncio/runners.py", line 188, in run
    return runner.run(main)
           ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/asyncio/runners.py", line 120, in run
    return self._loop.run_until_complete(task)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "uvloop/loop.pyx", line 1518, in uvloop.loop.Loop.run_until_complete
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/server.py", line 69, in serve
    await self._serve(sockets)
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/server.py", line 76, in _serve
    config.load()
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/config.py", line 434, in load
    self.loaded_app = import_from_string(self.app)
                      ^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/importer.py", line 22, in import_from_string
    raise exc from None
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/importer.py", line 19, in import_from_string
    module = importlib.import_module(module_str)
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/importlib/__init__.py", line 126, in import_module
    return _bootstrap._gcd_import(name[level:], package, level)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "<frozen importlib._bootstrap>", line 1206, in _gcd_import
  File "<frozen importlib._bootstrap>", line 1178, in _find_and_load
  File "<frozen importlib._bootstrap>", line 1149, in _find_and_load_unlocked
  File "<frozen importlib._bootstrap>", line 690, in _load_unlocked
  File "<frozen importlib._bootstrap_external>", line 940, in exec_module
  File "<frozen importlib._bootstrap>", line 241, in _call_with_frames_removed
  File "/home/ubuntu/FigmaFrontend/backend/app/main.py", line 7, in <module>
    from app.api.v1.api import api_router
  File "/home/ubuntu/FigmaFrontend/backend/app/api/v1/api.py", line 5, in <module>
    from app.api.v1.endpoints import auth, stores, services, appointments, technicians, store_hours, technician_unavailable, notifications, reviews
  File "/home/ubuntu/FigmaFrontend/backend/app/api/v1/endpoints/reviews.py", line 10, in <module>
    from app.core.auth import get_current_user
ModuleNotFoundError: No module named 'app.core.auth'
WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/reviews.py'. Reloading...
INFO:     Started server process [6080]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
INFO:     127.0.0.1:41966 - "GET /health HTTP/1.1" 200 OK
2026-01-04 18:07:56,297 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-01-04 18:07:56,298 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:07:56,306 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-01-04 18:07:56,306 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:07:56,310 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-01-04 18:07:56,310 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:07:56,317 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 18:07:56,346 INFO sqlalchemy.engine.Engine SELECT avg(reviews.rating) AS average_rating, count(reviews.id) AS total_reviews 
FROM reviews 
WHERE reviews.store_id = %(store_id_1)s 
 LIMIT %(param_1)s
2026-01-04 18:07:56,346 INFO sqlalchemy.engine.Engine [generated in 0.00038s] {'store_id_1': 1, 'param_1': 1}
2026-01-04 18:07:56,352 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:41968 - "GET /api/v1/reviews/stores/1/rating HTTP/1.1" 200 OK
2026-01-04 18:07:59,232 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 18:07:59,321 INFO sqlalchemy.engine.Engine SELECT reviews.id AS reviews_id, reviews.user_id AS reviews_user_id, reviews.store_id AS reviews_store_id, reviews.appointment_id AS reviews_appointment_id, reviews.rating AS reviews_rating, reviews.comment AS reviews_comment, reviews.created_at AS reviews_created_at, reviews.updated_at AS reviews_updated_at 
FROM reviews 
WHERE reviews.store_id = %(store_id_1)s ORDER BY reviews.created_at DESC 
 LIMIT %(param_1)s, %(param_2)s
2026-01-04 18:07:59,321 INFO sqlalchemy.engine.Engine [generated in 0.00033s] {'store_id_1': 1, 'param_1': 0, 'param_2': 20}
2026-01-04 18:07:59,328 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:56662 - "GET /api/v1/reviews/stores/1 HTTP/1.1" 200 OK
WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/reviews.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [6080]
INFO:     Started server process [6411]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/reviews.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [6411]
INFO:     Started server process [6425]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-01-04 18:15:58,677 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-01-04 18:15:58,677 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:15:58,684 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-01-04 18:15:58,685 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:15:58,688 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-01-04 18:15:58,688 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:15:58,695 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 18:15:58,818 INFO sqlalchemy.engine.Engine SELECT avg(reviews.rating) AS average_rating, count(reviews.id) AS total_reviews 
FROM reviews 
WHERE reviews.store_id = %(store_id_1)s 
 LIMIT %(param_1)s
2026-01-04 18:15:58,818 INFO sqlalchemy.engine.Engine [generated in 0.00048s] {'store_id_1': 4, 'param_1': 1}
2026-01-04 18:15:58,826 INFO sqlalchemy.engine.Engine SELECT floor(reviews.rating) AS rating_floor, count(reviews.id) AS count 
FROM reviews 
WHERE reviews.store_id = %(store_id_1)s GROUP BY floor(reviews.rating)
2026-01-04 18:15:58,826 INFO sqlalchemy.engine.Engine [generated in 0.00031s] {'store_id_1': 4}
2026-01-04 18:15:58,834 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52606 - "GET /api/v1/reviews/stores/4/rating HTTP/1.1" 200 OK
2026-01-04 18:16:02,712 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 18:16:02,715 INFO sqlalchemy.engine.Engine SELECT reviews.id AS reviews_id, reviews.user_id AS reviews_user_id, reviews.store_id AS reviews_store_id, reviews.appointment_id AS reviews_appointment_id, reviews.rating AS reviews_rating, reviews.comment AS reviews_comment, reviews.created_at AS reviews_created_at, reviews.updated_at AS reviews_updated_at 
FROM reviews 
WHERE reviews.store_id = %(store_id_1)s ORDER BY reviews.created_at DESC 
 LIMIT %(param_1)s, %(param_2)s
2026-01-04 18:16:02,715 INFO sqlalchemy.engine.Engine [generated in 0.00035s] {'store_id_1': 4, 'param_1': 0, 'param_2': 20}
2026-01-04 18:16:02,725 INFO sqlalchemy.engine.Engine SELECT backend_users.id AS backend_users_id, backend_users.phone AS backend_users_phone, backend_users.password_hash AS backend_users_password_hash, backend_users.username AS backend_users_username, backend_users.full_name AS backend_users_full_name, backend_users.email AS backend_users_email, backend_users.avatar_url AS backend_users_avatar_url, backend_users.phone_verified AS backend_users_phone_verified, backend_users.is_active AS backend_users_is_active, backend_users.is_admin AS backend_users_is_admin, backend_users.store_id AS backend_users_store_id, backend_users.created_at AS backend_users_created_at, backend_users.updated_at AS backend_users_updated_at 
FROM backend_users 
WHERE backend_users.id = %(id_1)s 
 LIMIT %(param_1)s
2026-01-04 18:16:02,725 INFO sqlalchemy.engine.Engine [generated in 0.00026s] {'id_1': 60001, 'param_1': 1}
2026-01-04 18:16:02,731 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52618 - "GET /api/v1/reviews/stores/4 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.11/dist-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "/usr/local/lib/python3.11/dist-packages/fastapi/concurrency.py", line 35, in contextmanager_in_threadpool
    raise e
AttributeError: 'User' object has no attribute 'name'
2026-01-04 18:16:06,235 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 18:16:06,236 INFO sqlalchemy.engine.Engine SELECT reviews.id AS reviews_id, reviews.user_id AS reviews_user_id, reviews.store_id AS reviews_store_id, reviews.appointment_id AS reviews_appointment_id, reviews.rating AS reviews_rating, reviews.comment AS reviews_comment, reviews.created_at AS reviews_created_at, reviews.updated_at AS reviews_updated_at 
FROM reviews 
WHERE reviews.store_id = %(store_id_1)s ORDER BY reviews.created_at DESC 
 LIMIT %(param_1)s, %(param_2)s
2026-01-04 18:16:06,236 INFO sqlalchemy.engine.Engine [cached since 3.521s ago] {'store_id_1': 4, 'param_1': 0, 'param_2': 20}
2026-01-04 18:16:06,244 INFO sqlalchemy.engine.Engine SELECT backend_users.id AS backend_users_id, backend_users.phone AS backend_users_phone, backend_users.password_hash AS backend_users_password_hash, backend_users.username AS backend_users_username, backend_users.full_name AS backend_users_full_name, backend_users.email AS backend_users_email, backend_users.avatar_url AS backend_users_avatar_url, backend_users.phone_verified AS backend_users_phone_verified, backend_users.is_active AS backend_users_is_active, backend_users.is_admin AS backend_users_is_admin, backend_users.store_id AS backend_users_store_id, backend_users.created_at AS backend_users_created_at, backend_users.updated_at AS backend_users_updated_at 
FROM backend_users 
WHERE backend_users.id = %(id_1)s 
 LIMIT %(param_1)s
2026-01-04 18:16:06,244 INFO sqlalchemy.engine.Engine [cached since 3.52s ago] {'id_1': 60001, 'param_1': 1}
2026-01-04 18:16:06,250 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:52634 - "GET /api/v1/reviews/stores/4 HTTP/1.1" 500 Internal Server Error
ERROR:    Exception in ASGI application
Traceback (most recent call last):
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/protocols/http/httptools_impl.py", line 401, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
           ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/usr/local/lib/python3.11/dist-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/applications.py", line 113, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/middleware/errors.py", line 187, in __call__
    raise exc
  File "/usr/local/lib/python3.11/dist-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/middleware/cors.py", line 85, in __call__
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 62, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.11/dist-packages/starlette/_exception_handler.py", line 51, in wrapped_app
    await app(scope, receive, sender)
  File "/usr/local/lib/python3.11/dist-packages/starlette/routing.py", line 73, in app
    response = await f(request)
               ^^^^^^^^^^^^^^^^
  File "/usr/lib/python3.11/contextlib.py", line 222, in __aexit__
    await self.gen.athrow(typ, value, traceback)
  File "/usr/local/lib/python3.11/dist-packages/fastapi/concurrency.py", line 35, in contextmanager_in_threadpool
    raise e
AttributeError: 'User' object has no attribute 'name'
WARNING:  WatchFiles detected changes in 'app/api/v1/endpoints/reviews.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [6425]
INFO:     Started server process [6518]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
2026-01-04 18:16:25,819 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-01-04 18:16:25,823 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:16:25,832 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-01-04 18:16:25,837 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:16:25,843 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-01-04 18:16:25,843 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 18:16:25,855 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 18:16:25,866 INFO sqlalchemy.engine.Engine SELECT reviews.id AS reviews_id, reviews.user_id AS reviews_user_id, reviews.store_id AS reviews_store_id, reviews.appointment_id AS reviews_appointment_id, reviews.rating AS reviews_rating, reviews.comment AS reviews_comment, reviews.created_at AS reviews_created_at, reviews.updated_at AS reviews_updated_at 
FROM reviews 
WHERE reviews.store_id = %(store_id_1)s ORDER BY reviews.created_at DESC 
 LIMIT %(param_1)s, %(param_2)s
2026-01-04 18:16:25,868 INFO sqlalchemy.engine.Engine [generated in 0.00219s] {'store_id_1': 4, 'param_1': 0, 'param_2': 20}
2026-01-04 18:16:25,882 INFO sqlalchemy.engine.Engine SELECT backend_users.id AS backend_users_id, backend_users.phone AS backend_users_phone, backend_users.password_hash AS backend_users_password_hash, backend_users.username AS backend_users_username, backend_users.full_name AS backend_users_full_name, backend_users.email AS backend_users_email, backend_users.avatar_url AS backend_users_avatar_url, backend_users.phone_verified AS backend_users_phone_verified, backend_users.is_active AS backend_users_is_active, backend_users.is_admin AS backend_users_is_admin, backend_users.store_id AS backend_users_store_id, backend_users.created_at AS backend_users_created_at, backend_users.updated_at AS backend_users_updated_at 
FROM backend_users 
WHERE backend_users.id = %(id_1)s 
 LIMIT %(param_1)s
2026-01-04 18:16:25,882 INFO sqlalchemy.engine.Engine [generated in 0.00043s] {'id_1': 60001, 'param_1': 1}
2026-01-04 18:16:25,894 INFO sqlalchemy.engine.Engine SELECT backend_users.id AS backend_users_id, backend_users.phone AS backend_users_phone, backend_users.password_hash AS backend_users_password_hash, backend_users.username AS backend_users_username, backend_users.full_name AS backend_users_full_name, backend_users.email AS backend_users_email, backend_users.avatar_url AS backend_users_avatar_url, backend_users.phone_verified AS backend_users_phone_verified, backend_users.is_active AS backend_users_is_active, backend_users.is_admin AS backend_users_is_admin, backend_users.store_id AS backend_users_store_id, backend_users.created_at AS backend_users_created_at, backend_users.updated_at AS backend_users_updated_at 
FROM backend_users 
WHERE backend_users.id = %(id_1)s 
 LIMIT %(param_1)s
2026-01-04 18:16:25,902 INFO sqlalchemy.engine.Engine [cached since 0.02006s ago] {'id_1': 30001, 'param_1': 1}
2026-01-04 18:16:25,914 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     127.0.0.1:44026 - "GET /api/v1/reviews/stores/4 HTTP/1.1" 200 OK
