nohup: ignoring input
INFO:     Will watch for changes in these directories: ['/home/ubuntu/FigmaFrontend/backend']
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [22653] using WatchFiles
INFO:     Started server process [22655]
INFO:     Waiting for application startup.
2026-01-04 22:40:38,517 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-01-04 22:40:38,518 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:40:38,524 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-01-04 22:40:38,524 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:40:38,527 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-01-04 22:40:38,527 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:40:38,533 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 22:40:38,536 INFO sqlalchemy.engine.Engine SELECT appointment_reminders.id AS appointment_reminders_id, appointment_reminders.appointment_id AS appointment_reminders_appointment_id, appointment_reminders.user_id AS appointment_reminders_user_id, appointment_reminders.reminder_type AS appointment_reminders_reminder_type, appointment_reminders.status AS appointment_reminders_status, appointment_reminders.scheduled_time AS appointment_reminders_scheduled_time, appointment_reminders.sent_at AS appointment_reminders_sent_at, appointment_reminders.error_message AS appointment_reminders_error_message, appointment_reminders.created_at AS appointment_reminders_created_at, appointment_reminders.updated_at AS appointment_reminders_updated_at 
FROM appointment_reminders 
WHERE appointment_reminders.status = %(status_1)s AND appointment_reminders.scheduled_time <= %(scheduled_time_1)s
2026-01-04 22:40:38,537 INFO sqlalchemy.engine.Engine [generated in 0.00022s] {'status_1': 'pending', 'scheduled_time_1': datetime.datetime(2026, 1, 4, 22, 40, 38, 427398)}
2026-01-04 22:40:38,543 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'create_referral_coupon.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [22655]
INFO:     Started server process [22702]
INFO:     Waiting for application startup.
2026-01-04 22:41:12,332 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-01-04 22:41:12,332 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:12,339 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-01-04 22:41:12,339 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:12,342 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-01-04 22:41:12,342 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:12,349 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 22:41:12,353 INFO sqlalchemy.engine.Engine SELECT appointment_reminders.id AS appointment_reminders_id, appointment_reminders.appointment_id AS appointment_reminders_appointment_id, appointment_reminders.user_id AS appointment_reminders_user_id, appointment_reminders.reminder_type AS appointment_reminders_reminder_type, appointment_reminders.status AS appointment_reminders_status, appointment_reminders.scheduled_time AS appointment_reminders_scheduled_time, appointment_reminders.sent_at AS appointment_reminders_sent_at, appointment_reminders.error_message AS appointment_reminders_error_message, appointment_reminders.created_at AS appointment_reminders_created_at, appointment_reminders.updated_at AS appointment_reminders_updated_at 
FROM appointment_reminders 
WHERE appointment_reminders.status = %(status_1)s AND appointment_reminders.scheduled_time <= %(scheduled_time_1)s
2026-01-04 22:41:12,353 INFO sqlalchemy.engine.Engine [generated in 0.00027s] {'status_1': 'pending', 'scheduled_time_1': datetime.datetime(2026, 1, 4, 22, 41, 12, 234935)}
2026-01-04 22:41:12,360 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'create_referral_coupon.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [22702]
INFO:     Started server process [22717]
INFO:     Waiting for application startup.
2026-01-04 22:41:27,643 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-01-04 22:41:27,643 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:27,649 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-01-04 22:41:27,649 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:27,652 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-01-04 22:41:27,653 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:27,659 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 22:41:27,662 INFO sqlalchemy.engine.Engine SELECT appointment_reminders.id AS appointment_reminders_id, appointment_reminders.appointment_id AS appointment_reminders_appointment_id, appointment_reminders.user_id AS appointment_reminders_user_id, appointment_reminders.reminder_type AS appointment_reminders_reminder_type, appointment_reminders.status AS appointment_reminders_status, appointment_reminders.scheduled_time AS appointment_reminders_scheduled_time, appointment_reminders.sent_at AS appointment_reminders_sent_at, appointment_reminders.error_message AS appointment_reminders_error_message, appointment_reminders.created_at AS appointment_reminders_created_at, appointment_reminders.updated_at AS appointment_reminders_updated_at 
FROM appointment_reminders 
WHERE appointment_reminders.status = %(status_1)s AND appointment_reminders.scheduled_time <= %(scheduled_time_1)s
2026-01-04 22:41:27,662 INFO sqlalchemy.engine.Engine [generated in 0.00024s] {'status_1': 'pending', 'scheduled_time_1': datetime.datetime(2026, 1, 4, 22, 41, 27, 553080)}
2026-01-04 22:41:27,669 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'create_referral_coupon.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [22717]
INFO:     Started server process [22726]
INFO:     Waiting for application startup.
2026-01-04 22:41:41,127 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-01-04 22:41:41,127 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:41,135 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-01-04 22:41:41,135 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:41,139 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-01-04 22:41:41,139 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:41:41,146 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 22:41:41,150 INFO sqlalchemy.engine.Engine SELECT appointment_reminders.id AS appointment_reminders_id, appointment_reminders.appointment_id AS appointment_reminders_appointment_id, appointment_reminders.user_id AS appointment_reminders_user_id, appointment_reminders.reminder_type AS appointment_reminders_reminder_type, appointment_reminders.status AS appointment_reminders_status, appointment_reminders.scheduled_time AS appointment_reminders_scheduled_time, appointment_reminders.sent_at AS appointment_reminders_sent_at, appointment_reminders.error_message AS appointment_reminders_error_message, appointment_reminders.created_at AS appointment_reminders_created_at, appointment_reminders.updated_at AS appointment_reminders_updated_at 
FROM appointment_reminders 
WHERE appointment_reminders.status = %(status_1)s AND appointment_reminders.scheduled_time <= %(scheduled_time_1)s
2026-01-04 22:41:41,151 INFO sqlalchemy.engine.Engine [generated in 0.00035s] {'status_1': 'pending', 'scheduled_time_1': datetime.datetime(2026, 1, 4, 22, 41, 41, 29805)}
2026-01-04 22:41:41,158 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     Application startup complete.
WARNING:  WatchFiles detected changes in 'test_referral_system.py'. Reloading...
INFO:     Shutting down
INFO:     Waiting for application shutdown.
INFO:     Application shutdown complete.
INFO:     Finished server process [22726]
INFO:     Started server process [22755]
INFO:     Waiting for application startup.
2026-01-04 22:42:17,226 INFO sqlalchemy.engine.Engine SELECT DATABASE()
2026-01-04 22:42:17,226 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:42:17,233 INFO sqlalchemy.engine.Engine SELECT @@sql_mode
2026-01-04 22:42:17,233 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:42:17,237 INFO sqlalchemy.engine.Engine SELECT @@lower_case_table_names
2026-01-04 22:42:17,237 INFO sqlalchemy.engine.Engine [raw sql] {}
2026-01-04 22:42:17,244 INFO sqlalchemy.engine.Engine BEGIN (implicit)
2026-01-04 22:42:17,249 INFO sqlalchemy.engine.Engine SELECT appointment_reminders.id AS appointment_reminders_id, appointment_reminders.appointment_id AS appointment_reminders_appointment_id, appointment_reminders.user_id AS appointment_reminders_user_id, appointment_reminders.reminder_type AS appointment_reminders_reminder_type, appointment_reminders.status AS appointment_reminders_status, appointment_reminders.scheduled_time AS appointment_reminders_scheduled_time, appointment_reminders.sent_at AS appointment_reminders_sent_at, appointment_reminders.error_message AS appointment_reminders_error_message, appointment_reminders.created_at AS appointment_reminders_created_at, appointment_reminders.updated_at AS appointment_reminders_updated_at 
FROM appointment_reminders 
WHERE appointment_reminders.status = %(status_1)s AND appointment_reminders.scheduled_time <= %(scheduled_time_1)s
2026-01-04 22:42:17,249 INFO sqlalchemy.engine.Engine [generated in 0.00033s] {'status_1': 'pending', 'scheduled_time_1': datetime.datetime(2026, 1, 4, 22, 42, 17, 108882)}
2026-01-04 22:42:17,257 INFO sqlalchemy.engine.Engine ROLLBACK
INFO:     Application startup complete.
